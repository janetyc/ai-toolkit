(this.webpackJsonpaitoolkit=this.webpackJsonpaitoolkit||[]).push([[0],{209:function(e,t,a){e.exports=a(393)},215:function(e,t,a){},393:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(47),o=a.n(c),i=(a(214),a(49)),l=a(40),u=a(406),s=a(405),p=a(24),m=(a(215),a(15)),d=a.n(m),f=a(17),E=a(16),h=a(401),b=a(404),g=a(31),j=a.n(g);function v(){return(v=Object(E.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/api/get_all_projects");case 2:return t=e.sent,e.abrupt("return",t.data.all_projects);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){(function(){return v.apply(this,arguments)})().then(c)}),[]),r.a.createElement(h.a,null,r.a.createElement(b.a.Group,{style:{marginTop:"2em"},itemsPerRow:4},a.map((function(e,t){return r.a.createElement(b.a,{key:t,href:"/#/project/"+e.id},r.a.createElement(b.a.Content,null,r.a.createElement(b.a.Header,null,"Project: ",e.title),r.a.createElement(b.a.Description,null,e.description)))}))))},O=a(408),k=a(21),w=a(197),_=a(181),x=a.n(_),P=a(61),S=function(e){var t=e.setImages,a=Object(n.useCallback)((function(e){e.forEach((function(e){var a=new FileReader;a.onload=function(e){console.log("upload image"),t((function(t){return[].concat(Object(k.a)(t),[{id:x()(),src:e.target.result}])}))},a.readAsDataURL(e)}))}),[t]),c=Object(w.a)({onDrop:a}),o=c.getRootProps,i=c.getInputProps,l=c.isDragActive;return r.a.createElement("div",Object.assign({className:"ui center aligned tertiary blue inverted segment"},o()),r.a.createElement(P.a,{name:"cloud upload",size:"big"}),r.a.createElement("input",i()),l?r.a.createElement("p",null,"Drop the files here ..."):r.a.createElement("p",null,"Drag 'n' drop some files here, or click to select files"))},I={display:"inline",width:100,height:100,padding:"3px"};function A(){return(A=Object(E.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("/api/add_images",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=function(e){var t=e.statusCallback,a=e.projectId,c=Object(n.useState)([]),o=Object(f.a)(c,2),i=o[0],l=o[1];return r.a.createElement("div",null,r.a.createElement(S,{setImages:l}),r.a.createElement("div",null,i.map((function(e){return r.a.createElement("img",{key:e.id,src:e.src,style:I})}))),i.length>0&&r.a.createElement(s.a,{color:"teal",fluid:!0,size:"small",onClick:function(){var e={};i.map((function(t){e[t.id]=t.src})),function(e){return A.apply(this,arguments)}({project_id:a,data:e}).then((function(e){e.success&&(l([]),t(!0))}))}},"Submit"))},D=a(407),R=a(196),T=function(e){var t=e.imageList;return r.a.createElement(h.a,null,r.a.createElement(D.a,null,r.a.createElement(D.a.Row,{columns:5},t.map((function(e,t){return r.a.createElement(D.a.Column,{key:e.key},r.a.createElement(R.a,{src:e.image_url}))})))))};function q(e){return z.apply(this,arguments)}function z(){return(z=Object(E.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("/api/get_project_by_id",{project_id:t});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=function(e){var t=e.match,a=Object(n.useState)({}),c=Object(f.a)(a,2),o=c[0],l=c[1],u=Object(n.useState)([]),p=Object(f.a)(u,2),m=p[0],d=p[1],E=t.params.pid;return Object(n.useEffect)((function(){q(E).then((function(e){l(e.data),d(e.image_data)})),console.log("fetch")}),[]),r.a.createElement(h.a,null,r.a.createElement("div",{style:{marginTop:"2em"}},r.a.createElement(O.a,{as:"h2"},"Project: ",o.title," ",r.a.createElement(s.a,{color:"teal",as:i.b,to:"/annotate/"+E},"Start to Annotate")),r.a.createElement("p",null,o.description)),r.a.createElement("div",{style:{marginTop:"2em"}},r.a.createElement(C,{statusCallback:function(e){q(E).then((function(e){l(e.data),d(e.image_data)})),console.log("upload fetch")},projectId:E})),r.a.createElement("div",{style:{marginTop:"3em"}},r.a.createElement(T,{imageList:m})))},L=a(198),W=a(402),B=a(409),H=a(89);function J(){return(J=Object(E.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("/api/add_project",t);case 2:a=e.sent,console.log(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G=function(){var e=Object(n.useState)(!1),t=Object(f.a)(e,2),a=t[0],c=t[1],o=Object(L.a)(),i=o.register,u=o.errors,p=o.handleSubmit;return r.a.createElement(h.a,null,a&&r.a.createElement(l.a,{to:"/projects"}),r.a.createElement(D.a,{textAlign:"center",style:{height:"80vh"},verticalAlign:"middle"},r.a.createElement(D.a.Column,{style:{maxWidth:450}},r.a.createElement(W.a,{size:"large",onSubmit:p((function(e,t){(function(e){return J.apply(this,arguments)})(e).then((function(){c(!0),t.target.reset()}))}))},r.a.createElement(B.a,{stacked:!0},r.a.createElement(W.a.Field,null,r.a.createElement("input",{type:"hidden",name:"created_user",value:"web_user",ref:i}),r.a.createElement("input",{placeholder:"Project title",name:"title",ref:i({required:!0})}),u.title&&r.a.createElement(H.a,{pointing:!0,prompt:!0},"Project title is required")),r.a.createElement(W.a.Field,null,r.a.createElement("input",{placeholder:"Description",name:"description",ref:i({required:!0})}),u.description&&r.a.createElement(H.a,{pointing:!0,prompt:!0},"Project description is required")),r.a.createElement(s.a,{color:"teal",fluid:!0,size:"large"},"Add Project"))))))},N=a(194),U=a.n(N);a(381);function $(){return($=Object(E.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("/api/get_project_by_id",{project_id:t});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var K=function(e){var t=e.match,a=Object(n.useState)({}),c=Object(f.a)(a,2),o=(c[0],c[1]),i=Object(n.useState)([]),l=Object(f.a)(i,2),u=l[0],s=l[1],p=Object(n.useState)(!1),m=Object(f.a)(p,2),d=m[0],E=m[1],b=t.params.pid;return Object(n.useEffect)((function(){(function(e){return $.apply(this,arguments)})(b).then((function(e){o(e.data),s(e.image_data),E(!0)})),console.log("fetch")}),[]),r.a.createElement(h.a,null,d&&r.a.createElement(U.a,{mouseTrackingEnabled:!0},u.map((function(e,t){return r.a.createElement("img",{key:e.key,src:e.image_url})}))))},M=Object(p.a)(),Q=r.a.createElement(i.a,{history:M},r.a.createElement(u.a,null,r.a.createElement(u.a.Item,null,r.a.createElement(i.b,{to:"/"},"Home")),r.a.createElement(u.a.Item,{position:"right"},r.a.createElement(s.a,{color:"teal",as:i.b,to:"/addProject"},"Add Project"))),r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/",component:y}),r.a.createElement(l.b,{path:"/projects",component:y}),r.a.createElement(l.b,{path:"/project/:pid",component:F}),r.a.createElement(l.b,{path:"/annotate/:pid",component:K}),r.a.createElement(l.b,{path:"/addProject",component:G})));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement("div",null,Q),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[209,1,2]]]);
//# sourceMappingURL=main.29184660.chunk.js.map