(this.webpackJsonpaitoolkit=this.webpackJsonpaitoolkit||[]).push([[0],{145:function(e,t,a){},204:function(e,t,a){},205:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPIAAAA+CAYAAAARQkZrAAAEuWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgZXhpZjpQaXhlbFhEaW1lbnNpb249IjI0MiIKICAgZXhpZjpQaXhlbFlEaW1lbnNpb249IjYyIgogICBleGlmOkNvbG9yU3BhY2U9IjEiCiAgIHRpZmY6SW1hZ2VXaWR0aD0iMjQyIgogICB0aWZmOkltYWdlTGVuZ3RoPSI2MiIKICAgdGlmZjpSZXNvbHV0aW9uVW5pdD0iMiIKICAgdGlmZjpYUmVzb2x1dGlvbj0iOTYuMCIKICAgdGlmZjpZUmVzb2x1dGlvbj0iOTYuMCIKICAgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIKICAgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIgogICB4bXA6TW9kaWZ5RGF0ZT0iMjAyMC0w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"},206:function(e,t,a){e.exports=a.p+"static/media/objectstory-1.010478ea.png"},207:function(e,t,a){e.exports=a.p+"static/media/objectstory-2.babd7bee.png"},242:function(e,t,a){e.exports=a(465)},465:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(56),l=a.n(c),i=(a(145),a(247),a(26)),o=a(50),u=a(36),s=a(473),m=a(231),d=a(474),p=a(482),b=a(481),E=a(478),g=a(106),h=a(70),f=a.n(h),j=a(205),y=a.n(j),O=a(206),w=a.n(O),v=a(207),I=a.n(v);var k=function(){var e=window.location.hash.split("?")[1],t=f.a.parse(e);return r.a.createElement(s.a,null,r.a.createElement("div",{align:"center",style:{marginTop:"30px"}},r.a.createElement(m.a,{src:y.a})),r.a.createElement(d.a,null),r.a.createElement("div",{style:{textAlign:"center",marginTop:"10px"}},"workerId"in t&&"assignmentId"in t&&"image_id"in t&&r.a.createElement(p.a,{size:"large",fluid:!0,color:"teal",as:i.b,to:"/annotateObjectStory/"+t.image_id+"?"+e},"Start to Tell a Object Story!")),r.a.createElement(b.a,{color:"blue"},r.a.createElement(b.a.Header,null,"Reminder!! Please use the ",r.a.createElement("u",null,"Google Chrome browser")," to do the task")),r.a.createElement(E.a.Group,{divided:!0},r.a.createElement(E.a,null,r.a.createElement(E.a.Content,null,r.a.createElement(E.a.Header,null,"Step 1: Tell a story"),r.a.createElement(E.a.Description,null,"Use your reasoning skill to ",r.a.createElement("u",null,r.a.createElement("b",null,"guess or speculate a possible story"))," in this image.",r.a.createElement("br",null),"(Please describe ",r.a.createElement("b",null,"WHO"),", ",r.a.createElement("b",null,"WHAT"),", ",r.a.createElement("b",null,"WHERE"),", and ",r.a.createElement("b",null,"WHEN")," to construct your story.)",r.a.createElement("br",null),r.a.createElement("br",null),'e.g., "Two children" are "playing" toy bear in "the livining room" during "the Christmas time".')),r.a.createElement(m.a,{position:"right",bordered:!0,size:"large",src:w.a})),r.a.createElement(E.a,null,r.a.createElement(E.a.Content,null,r.a.createElement(E.a.Header,null,"Step 2: Identiy key objects"),r.a.createElement(E.a.Description,null,"Identify ",r.a.createElement("u",null,r.a.createElement("b",null,"key objects"))," as evidences that support your speculation.",r.a.createElement("br",null),r.a.createElement("br",null),"e.g., The identified objects: ",r.a.createElement(g.a,{color:"blue"},"Christmas tree"),", ",r.a.createElement(g.a,{color:"blue"},"Slipper shoes"),", ",r.a.createElement(g.a,{color:"blue"},"Toy bear"))),r.a.createElement(m.a,{position:"right",bordered:!0,size:"large",src:I.a})),r.a.createElement(E.a,null,r.a.createElement(E.a.Content,null,r.a.createElement(E.a.Header,null,"Step 3: Complete your story"),r.a.createElement(E.a.Description,null,r.a.createElement("u",null,r.a.createElement("b",null,"Check and submit"))," your story.")))))},A=a(8),x=a.n(A),R=a(9),S=a(22),C=a(483),Y=a(479),D=a(27),W=a.n(D);function L(){return(L=Object(S.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.get("/api/get_all_projects");case 2:return t=e.sent,e.abrupt("return",t.data.all_projects);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var X=function(){var e=Object(n.useState)([]),t=Object(R.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){(function(){return L.apply(this,arguments)})().then(c)}),[]),r.a.createElement("div",null,r.a.createElement(C.a,null,r.a.createElement(C.a.Item,null,r.a.createElement(i.b,{to:"/dashboard"},"Home")),r.a.createElement(C.a.Item,{position:"right"},r.a.createElement(p.a,{color:"teal",as:i.b,to:"/addProject"},"Add Project"))),r.a.createElement(s.a,null,r.a.createElement(Y.a.Group,{style:{marginTop:"2em"},itemsPerRow:4},a.map((function(e,t){return r.a.createElement(Y.a,{key:t,href:"/#/project/"+e.id},r.a.createElement(Y.a.Content,null,r.a.createElement(Y.a.Header,null,"Project: ",e.title),r.a.createElement(Y.a.Description,null,e.description)))})))))},M=a(484),G=a(21),T=a(230),P=a(218),H=a.n(P),Z=a(74),B=function(e){var t=e.setImages,a=Object(n.useCallback)((function(e){e.forEach((function(e){var a=new FileReader;a.onload=function(e){console.log("upload image"),t((function(t){return[].concat(Object(G.a)(t),[{id:H()(),src:e.target.result}])}))},a.readAsDataURL(e)}))}),[t]),c=Object(T.a)({onDrop:a}),l=c.getRootProps,i=c.getInputProps,o=c.isDragActive;return r.a.createElement("div",Object.assign({className:"ui center aligned secondary segment"},l()),r.a.createElement(Z.a,{name:"cloud upload",size:"big"}),r.a.createElement("input",i()),o?r.a.createElement("p",null,"Drop the files here ..."):r.a.createElement("p",null,"Drag 'n' drop some files here, or click to select files"))},N=a(480),z=a(475),K={display:"inline",width:100,height:100,padding:"3px"};function F(){return(F=Object(S.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.post("/api/add_images",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V=function(e){var t=e.statusCallback,a=e.projectId,c=Object(n.useState)([]),l=Object(R.a)(c,2),i=l[0],o=l[1],u=Object(n.useState)(!1),s=Object(R.a)(u,2),m=s[0],d=s[1];return r.a.createElement("div",null,m&&r.a.createElement(N.a,{active:!0,inverted:!0},r.a.createElement(z.a,{size:"medium"},"Uploading")),r.a.createElement(B,{setImages:o}),r.a.createElement("div",null,i.map((function(e){return r.a.createElement("img",{key:e.id,src:e.src,style:K})}))),i.length>0&&r.a.createElement(p.a,{color:"teal",fluid:!0,size:"small",onClick:function(){d(!0);var e={};i.map((function(t){e[t.id]=t.src})),function(e){return F.apply(this,arguments)}({project_id:a,data:e}).then((function(e){e.success&&(d(!1),o([]),t(!0))}))}},"Submit"))},q=function(e){var t=e.imageList;return r.a.createElement(s.a,null,r.a.createElement(Y.a.Group,{itemsPerRow:5},t.map((function(e,t){return r.a.createElement(Y.a,{key:e.key},r.a.createElement(Y.a.Content,null,r.a.createElement(m.a,{src:e.image_url})),r.a.createElement(Y.a.Content,{extra:!0},r.a.createElement(p.a.Group,{attached:"bottom"},r.a.createElement(p.a,{basic:!0,color:"grey",as:i.b,to:"/annotateObjectStory/"+e.id},"Tell"),r.a.createElement(p.a,{basic:!0,color:"grey",as:i.b,to:"/objectStory/"+e.id},"See"))))}))))};function U(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(S.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.post("/api/get_project_by_id",{project_id:t});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J=function(e){var t=e.match,a=Object(n.useState)({}),c=Object(R.a)(a,2),l=c[0],o=c[1],u=Object(n.useState)([]),m=Object(R.a)(u,2),d=m[0],b=m[1],E=t.params.pid;return Object(n.useEffect)((function(){U(E).then((function(e){o(e.data),b(e.image_data)})),console.log("fetch")}),[]),r.a.createElement("div",null,r.a.createElement(C.a,null,r.a.createElement(C.a.Item,null,r.a.createElement(i.b,{to:"/dashboard"},"Home")),r.a.createElement(C.a.Item,{position:"right"},r.a.createElement(p.a,{color:"teal",as:i.b,to:"/addProject"},"Add Project"))),r.a.createElement(s.a,null,r.a.createElement("div",{style:{marginTop:"2em"}},r.a.createElement(M.a,{as:"h2"},"Project: ",l.title,0!==d.length&&r.a.createElement(p.a,{style:{marginLeft:"7px"},color:"teal",as:i.b,to:"/annotate/"+E},"Start to Annotate")),r.a.createElement("p",null,l.description)),r.a.createElement("div",{style:{marginTop:"2em"}},r.a.createElement(V,{statusCallback:function(e){U(E).then((function(e){o(e.data),b(e.image_data)})),console.log("upload fetch")},projectId:E})),r.a.createElement("div",{style:{marginTop:"3em"}},r.a.createElement(q,{imageList:d}))))},_=a(72),$=a(485),ee=a(476),te=a(486);function ae(){return(ae=Object(S.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.post("/api/add_project",t);case 2:a=e.sent,console.log(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ne=function(){var e=Object(n.useState)(!1),t=Object(R.a)(e,2),a=t[0],c=t[1],l=Object(_.b)(),i=l.register,u=l.errors,m=l.handleSubmit;return r.a.createElement(s.a,null,a&&r.a.createElement(o.a,{to:"/projects"}),r.a.createElement($.a,{textAlign:"center",style:{height:"80vh"},verticalAlign:"middle"},r.a.createElement($.a.Column,{style:{maxWidth:450}},r.a.createElement(ee.a,{size:"large",onSubmit:m((function(e,t){(function(e){return ae.apply(this,arguments)})(e).then((function(){c(!0),t.target.reset()}))}))},r.a.createElement(te.a,{stacked:!0},r.a.createElement(ee.a.Field,null,r.a.createElement("input",{type:"hidden",name:"created_user",value:"web_user",ref:i}),r.a.createElement("input",{placeholder:"Project title",name:"title",ref:i({required:!0})}),u.title&&r.a.createElement(g.a,{pointing:!0,prompt:!0},"Project title is required")),r.a.createElement(ee.a.Field,null,r.a.createElement("input",{placeholder:"Description",name:"description",ref:i({required:!0})}),u.description&&r.a.createElement(g.a,{pointing:!0,prompt:!0},"Project description is required")),r.a.createElement(p.a,{color:"teal",fluid:!0,size:"large"},"Add Project"))))))},re=a(49),ce=a(23),le=function(e){var t=e.x,a=e.y,n=e.width,c=e.height,l=e.stroke,i=e.name;return r.a.createElement(ce.Rect,{x:t,y:a,width:n,height:c,scaleX:1,scaleY:1,stroke:l,strokeWidth:2,name:i})},ie=function(e){var t=e.x,a=e.y,c=e.width,l=e.height,i=e.name,o=e.stroke,u=e.onTransform,s=e.onEnter,m=e.onLeave,d=Object(n.useRef)();Object(n.useEffect)((function(){d.current.getLayer().batchDraw()}),[]);return r.a.createElement(ce.Rect,{ref:d,x:t,y:a,width:c,height:l,scaleX:1,scaleY:1,stroke:o,strokeWidth:3,name:i,strokeScaleEnabled:!1,draggable:!0,onDragEnd:function(e){var t=e.target;u({x:t.x(),y:t.y()})},onTransformEnd:function(e){var t=e.target;t.setAttrs({width:t.width()*t.scaleX(),height:t.height()*t.scaleY(),scaleX:1,scaleY:1}),u({width:t.width(),height:t.height(),scaleX:t.scaleX(),scaleY:t.scaleY()})},onMouseEnter:function(e){var t=e.target;t.stroke("#8AE1FF"),t.getStage().container().style.cursor="move",d.current.getLayer().draw(),s(t.name())},onMouseLeave:function(e){var t=e.target;t.stroke("#2982F9"),t.getStage().container().style.cursor="crosshair",d.current.getLayer().draw(),m(t.name())}})};var oe=function(e){var t=e.selectedShapeName,a=Object(n.useRef)();return Object(n.useEffect)((function(){var e=a.current.getStage().findOne(".".concat(t));e!==a.current.node()&&(e?a.current.attachTo(e):a.current.detach(),a.current.getLayer().batchDraw())}),[t]),r.a.createElement(ce.Transformer,{ref:a,ignoreStroke:!0,rotateEnabled:!1})},ue=a(58),se=a.n(ue);a(229);function me(){return(me=Object(S.a)(x.a.mark((function e(t,a){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.post("/api/get_predictions_by_image_url",{image_url:t,image_key:a});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(){return(de=Object(S.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.post("/api/get_project_by_id",{project_id:t});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pe=function(e){var t=e.match,a=Object(n.useState)({}),c=Object(R.a)(a,2),l=(c[0],c[1]),i=Object(n.useState)([]),o=Object(R.a)(i,2),u=o[0],m=o[1],d=Object(n.useState)([]),b=Object(R.a)(d,2),E=b[0],g=b[1],h=Object(n.useState)(!1),f=Object(R.a)(h,2),j=f[0],y=f[1],O=Object(n.useState)(!1),w=Object(R.a)(O,2),v=w[0],I=w[1],k=Object(n.useState)(0),A=Object(R.a)(k,2),x=A[0],S=A[1],Y=Object(n.useState)({w:0,h:0}),D=Object(R.a)(Y,2),W=D[0],L=D[1],X=Object(n.useState)(0),M=Object(R.a)(X,2),T=M[0],P=M[1],H=Object(n.useState)([]),Z=Object(R.a)(H,2),B=Z[0],N=Z[1],z=Object(n.useState)(0),K=Object(R.a)(z,2),F=K[0],V=K[1],q=Object(n.useRef)([]),U=Object(n.useState)(""),Q=Object(R.a)(U,2),J=Q[0],_=Q[1],$=Object(n.useState)(!1),ee=Object(R.a)($,2),te=ee[0],ae=ee[1],ne=Object(n.useRef)([]),ue=t.params.pid;function pe(e,t){I(!0),function(e,t){return me.apply(this,arguments)}(e,t).then((function(e){if(e.success){g(e.data.predictions),I(!1);var t=e.data.image_size;L({w:t[0],h:t[1]})}}))}var be=function(e){if("Stage"===e.target.getType())return ae(!0),void _("");if(!("Transformer"===e.target.getParent().className)){var t=e.target.name(),a=B.find((function(e){return e.name===t}));_(a?t:"")}},Ee=function(){ae(!1)};return Object(n.useEffect)((function(){(function(e){return de.apply(this,arguments)})(ue).then((function(e){l(e.data),ne.current=[],e.image_data.map((function(e,t){m((function(t){return[].concat(Object(G.a)(t),[{id:e.id,key:e.key,image_url:e.image_url}])})),ne.current[t]=Object(n.createRef)()})),y(!0)}))}),[]),r.a.createElement("div",null,r.a.createElement(C.a,null,r.a.createElement(C.a.Item,null,"PickaObject")),r.a.createElement(s.a,null,r.a.createElement("div",null,j&&u.map((function(e,t){return r.a.createElement("img",{key:t,style:{display:"none"},src:e.image_url,ref:ne.current[t],onLoad:function(){P(T+1)}})}))),r.a.createElement("div",null,j&&u.map((function(e,t){return r.a.createElement(p.a,{key:t,circular:!0,size:"tiny",onClick:function(){return function(e){S(e),g([]),N([])}(t)},content:t})}))),j&&T==u.length&&r.a.createElement("div",null,r.a.createElement("div",{style:{float:"left",display:"block"}},r.a.createElement(ce.Stage,{style:{float:"left"},width:ne.current[x].current.width,height:ne.current[x].current.height,onMouseDown:be,onTouchStart:be,onMouseUp:te&&Ee,onTouchEnd:te&&Ee},r.a.createElement(ce.Layer,null,r.a.createElement(ce.Image,{image:ne.current[x].current})),r.a.createElement(ce.Layer,null,!v&&E.map((function(e,t){return r.a.createElement(ce.Group,{key:t},r.a.createElement(le,{x:e.box[1]*W.w,y:e.box[0]*W.h,width:(e.box[3]-e.box[1])*W.w,height:(e.box[2]-e.box[0])*W.h,stroke:"#33d6ff",strokeWidth:2,name:e.label+"-"+t}),r.a.createElement(ce.Text,{x:e.box[1]*W.w,y:e.box[0]*W.h,fill:"#ccf5ff",fontSize:20,text:e.label}))}))),r.a.createElement(ce.Layer,null,B.map((function(e,t){return r.a.createElement(ie,Object.assign({ref:q.current[t].current,sclassName:"rect",key:e.key},e,{onTransform:function(e){!function(e,t){B[e]=Object(re.a)({},B[e],{},t),N((function(e){return Object(G.a)(e)}))}(t,e)}}))})),r.a.createElement(oe,{selectedShapeName:J})))),r.a.createElement("div",{style:{float:"left",marginLeft:"10px",display:"block"}},r.a.createElement(p.a,{onClick:function(e){e.preventDefault(),pe(u[x].image_url,u[x].key)}},"Predict"),!v&&E.map((function(e,t){return r.a.createElement("div",{key:t},e.label)}))),r.a.createElement("div",{style:{float:"left",marginLeft:"10px",display:"block"}},r.a.createElement(p.a,{onClick:function(e){e.preventDefault(),q.current[F]=Object(n.createRef)(),N((function(e){return[].concat(Object(G.a)(e),[{x:10,y:10,width:100,height:100,name:"rect".concat(F+1),stroke:"#cc0000",key:se.a.generate(),ref:q.current[F].current}])})),V(F+1)}},"Add")))))};a(204);function be(){return(be=Object(S.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.post("/api/add_objectstory",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(){return(Ee=Object(S.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.post("/api/get_image_by_id",{image_id:t});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ge=function(e){var t=e.match,a=Object(n.useState)({}),c=Object(R.a)(a,2),l=c[0],i=c[1],u=Object(n.useState)(!1),m=Object(R.a)(u,2),d=m[0],b=m[1],E=Object(n.useState)(!1),h=Object(R.a)(E,2),j=(h[0],h[1],Object(n.useState)(!1)),y=Object(R.a)(j,2),O=y[0],w=y[1],v=Object(n.useRef)(),I=Object(n.useState)([]),k=Object(R.a)(I,2),A=k[0],x=(k[1],Object(n.useState)(0)),S=Object(R.a)(x,2),Y=(S[0],S[1],Object(n.useState)(!1)),D=Object(R.a)(Y,2),W=(D[0],D[1]),L=Object(n.useState)([]),X=Object(R.a)(L,2),T=X[0],P=X[1],H=Object(n.useState)(0),Z=Object(R.a)(H,2),B=Z[0],N=Z[1],z=Object(n.useRef)([]),K=Object(n.useState)(""),F=Object(R.a)(K,2),V=F[0],q=F[1],U=Object(n.useState)(""),Q=Object(R.a)(U,2),J=Q[0],te=Q[1],ae=Object(n.useState)(!1),ne=Object(R.a)(ae,2),le=ne[0],ue=ne[1],me=Object(n.useState)(""),de=Object(R.a)(me,2),pe=de[0],ge=de[1],he=Object(o.g)(),fe=t.params.imgid,je=window.location.hash.split("?")[1],ye=f.a.parse(je),Oe=Object(_.b)({mode:"onBlur",defaultValue:{story:"",object:[]}}),we=Oe.control,ve=Oe.register,Ie=Oe.errors,ke=Oe.formState,Ae=Oe.handleSubmit,xe=Object(_.a)({control:we,name:"object"}),Re=xe.append,Se=xe.remove,Ce=function(e){if("Stage"===e.target.getType())return ue(!0),void q("");if(!("Transformer"===e.target.getParent().className)){var t=e.target.name(),a=T.find((function(e){return e.name===t}));q(a?t:"")}},Ye=function(){ue(!1)};return Object(n.useEffect)((function(){(function(e){return Ee.apply(this,arguments)})(fe).then((function(e){i(e.data),b(!0)})),"workerId"in ye&&ge(ye.workerId)}),[]),r.a.createElement("div",null,r.a.createElement(C.a,null,r.a.createElement(C.a.Item,null,"PickaObject")),r.a.createElement(s.a,{style:{minWidth:1100}},d&&r.a.createElement($.a,{celled:!0},r.a.createElement($.a.Row,null,r.a.createElement("img",{style:{display:"none"},src:l.image_url,ref:v,onLoad:function(){w(!0)}}),r.a.createElement($.a.Column,{width:12},O&&r.a.createElement(ce.Stage,{width:800,height:v.current.height*(800/v.current.width),onMouseDown:Ce,onTouchStart:Ce,onMouseUp:le&&Ye,onTouchEnd:le&&Ye},r.a.createElement(ce.Layer,null,r.a.createElement(ce.Image,{image:v.current,width:800,height:v.current.height*(800/v.current.width)})),r.a.createElement(ce.Layer,null,A.map((function(e,t){return e.object_list.map((function(e,t){return r.a.createElement(ce.Rect,{key:se.a.generate(),x:800*e.x,y:e.y*v.current.height*(800/v.current.width),width:800*e.w,height:e.h*v.current.height*(800/v.current.width),scaleX:1,scaleY:1,stroke:"#ff3333",strokeWidth:2})}))}))),r.a.createElement(ce.Layer,null,T.map((function(e,t){return r.a.createElement(ie,Object.assign({sclassName:"rect",key:e.key},e,{onTransform:function(e){!function(e,t){T[e]=Object(re.a)({},T[e],{},t),P((function(e){return Object(G.a)(e)}))}(t,e)},onEnter:function(e){te(e)},onLeave:function(e){te("")}}))})),r.a.createElement(oe,{selectedShapeName:V})))),r.a.createElement($.a.Column,{width:4},r.a.createElement(ee.a,{onSubmit:Ae((function(e,t){var a=[],n=v.current.height*(800/v.current.width);e.object.map((function(e,t){a.push({label:e.name,x:T[t].x/800,y:T[t].y/n,w:T[t].width/800,h:T[t].height/n})})),function(e){return be.apply(this,arguments)}({created_user:pe,image_id:fe,story:e.story,object_list:a}).then((function(){W(!0),t.target.reset(),P([]),je&&he.push("/mturksuccess?"+je)}))}))},r.a.createElement($.a.Row,null,r.a.createElement(M.a,{as:"h4",block:!0},"Step 1: Tell a story"),r.a.createElement("div",null,"Please speculate a possible story or scenario to describe ",r.a.createElement("b",null,"WHO")," and ",r.a.createElement("b",null,"WHAT activity")," are they doing."),r.a.createElement("textarea",{placeholder:"Tell us a story about this image",style:{marginTop:"6px",minHeight:"50px"},name:"story",ref:ve({required:!0})}),Ie.story&&r.a.createElement(g.a,{pointing:!0,prompt:!0},"Story is required")),r.a.createElement($.a.Row,{style:{marginTop:"2em"}},r.a.createElement(M.a,{as:"h4",block:!0},"Step 2: Identify key objects"),r.a.createElement("div",null,"Please identify ",r.a.createElement("b",null,"key objects")," that shape your written story."),r.a.createElement(p.a,{fluid:!0,color:"blue",onClick:function(e){e.preventDefault(),z.current[B]=Object(n.createRef)();var t=se.a.generate();P((function(e){return[].concat(Object(G.a)(e),[{x:10,y:10,width:100,height:100,key:t,name:"rect".concat(t),stroke:"#2982F9",lable:"none"}])})),Re({name:t}),N(B+1)},style:{marginTop:"6px",marginBottom:"6px"}},"Add An Object"),T.map((function(e,t){return r.a.createElement("div",{key:e.key,style:{marginBottom:"2px"},className:"".concat(J==e.name?"hoveredBox":""),onMouseEnter:function(){!function(e,t){t.stroke="#8AE1FF",T[e]=Object(re.a)({},T[e],{},t),P((function(e){return Object(G.a)(e)})),te(t.name)}(t,e)},onMouseLeave:function(){!function(e,t){t.stroke="#2982F9",T[e]=Object(re.a)({},T[e],{},t),P((function(e){return Object(G.a)(e)})),te("")}(t,e)}},r.a.createElement("div",{className:"ui icon input",style:{width:"100%"}},r.a.createElement("input",{type:"text",placeholder:"object "+(t+1),name:"object[".concat(t,"].name"),ref:ve({required:!0})}),r.a.createElement("i",{"aria-hidden":"true",className:"remove circular inverted link icon",onClick:function(){return e=t,T.splice(e,1),P((function(e){return Object(G.a)(e)})),N(B-1),void Se(e);var e}})))}))),0!==T.length&&r.a.createElement($.a.Row,{style:{marginTop:"5em"}},ke.isValid&&r.a.createElement(p.a,{fluid:!0,color:"teal",style:{marginBottom:"6px"}},"Submit this story!"),!ke.isValid&&r.a.createElement(p.a,{disabled:!0,fluid:!0,color:"teal",style:{marginBottom:"6px"}},"Submit this story!"))))))))};function he(){return(he=Object(S.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.post("/api/get_image_by_id",{image_id:t});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(){return(fe=Object(S.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.post("/api/get_stories_by_image_id",{image_id:t});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var je=function(e){var t=e.match,a=Object(n.useState)({}),c=Object(R.a)(a,2),l=c[0],i=c[1],o=Object(n.useState)(!1),u=Object(R.a)(o,2),m=u[0],p=u[1],b=Object(n.useState)(!1),E=Object(R.a)(b,2),h=(E[0],E[1]),f=Object(n.useState)(!1),j=Object(R.a)(f,2),y=j[0],O=j[1],w=Object(n.useRef)(),v=Object(n.useState)([]),I=Object(R.a)(v,2),k=I[0],A=I[1],x=Object(n.useState)(-1),S=Object(R.a)(x,2),Y=S[0],D=S[1],W=Object(n.useState)([]),L=Object(R.a)(W,2),X=L[0],M=L[1],T=t.params.imgid;return Object(n.useEffect)((function(){(function(e){return he.apply(this,arguments)})(T).then((function(e){i(e.data),p(!0)}))}),[]),Object(n.useEffect)((function(){(function(e){return fe.apply(this,arguments)})(T).then((function(e){A(e.data),e.data.map((function(e){console.log(e.story),M((function(t){return[].concat(Object(G.a)(t),Object(G.a)(e.object_list))}))})),h(!0)}))}),[]),r.a.createElement("div",null,r.a.createElement(C.a,null,r.a.createElement(C.a.Item,null,"PickaObject")),r.a.createElement(s.a,null,m&&r.a.createElement($.a,{celled:!0},r.a.createElement($.a.Row,null,r.a.createElement("img",{style:{display:"none"},src:l.image_url,ref:w,onLoad:function(){O(!0)}}),r.a.createElement($.a.Column,{width:12},y&&r.a.createElement(ce.Stage,{width:800,height:w.current.height*(800/w.current.width)},r.a.createElement(ce.Layer,null,r.a.createElement(ce.Image,{image:w.current,width:800,height:w.current.height*(800/w.current.width)})),r.a.createElement(ce.Layer,null,k.map((function(e,t){return e.object_list.map((function(e,a){return r.a.createElement(ce.Group,{key:se.a.generate()},r.a.createElement(ce.Rect,{x:800*e.x,y:e.y*w.current.height*(800/w.current.width),width:800*e.w,height:e.h*w.current.height*(800/w.current.width),scaleX:1,scaleY:1,stroke:Y==t?"#ff4d4d":"#ffcccc",strokeWidth:2}),r.a.createElement(ce.Text,{text:e.label,fill:Y==t?"#ff4d4d":"#ffcccc",x:800*e.x,y:e.y*w.current.height*(800/w.current.width)}))}))}))))),r.a.createElement($.a.Column,{width:4},r.a.createElement("div",null,"Total story: ",k.length),r.a.createElement("div",null,"Total object: ",X.length),X.map((function(e,t){return r.a.createElement(g.a,{key:"o-"+t,size:"tiny"},e.label)})))),r.a.createElement($.a.Row,null,r.a.createElement($.a.Column,{width:16},k.map((function(e,t){return r.a.createElement($.a.Row,{key:"story-"+t},r.a.createElement("div",{onMouseEnter:function(){D(t)},onMouseLeave:function(){D(-1)}},"Story ",t+1,": ",e.story,e.object_list.map((function(e,a){return r.a.createElement(g.a,{style:{marginLeft:"3px"},key:"obj-"+t+"-"+a,color:"grey",size:"small"},e.label)})),r.a.createElement(d.a,null)))})))))))};function ye(){return(ye=Object(S.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.post("/api/get_project_by_id",{project_id:t.toString()});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(){return(Oe=Object(S.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.get("/api/get_all_projects");case 2:return t=e.sent,e.abrupt("return",t.data.all_projects);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var we=function(){var e=Object(n.useState)([]),t=Object(R.a)(e,2),a=t[0],c=t[1],l=function(e,t){console.log("fetch "+e),console.log(a[e]),"image_data"in a[e]?console.log("fetch already!!!"):(console.log("fetch data from project "+t),function(e){return ye.apply(this,arguments)}(t).then((function(t){a[e]=Object(re.a)({},a[e],{image_data:t.image_data}),c((function(e){return Object(G.a)(e)}))}))),console.log(e),console.log(a)};return Object(n.useEffect)((function(){(function(){return Oe.apply(this,arguments)})().then((function(e){e.map((function(e){c((function(t){return[].concat(Object(G.a)(t),[{data:e}])}))}))}))}),[]),r.a.createElement("div",null,r.a.createElement(C.a,null,r.a.createElement(C.a.Item,null,r.a.createElement(i.b,{to:"/dashboard"},"Home")),r.a.createElement(C.a.Item,{position:"right"},r.a.createElement(p.a,{color:"teal",as:i.b,to:"/addProject"},"Add Project"))),r.a.createElement(s.a,null,r.a.createElement(E.a.Group,{divided:!0},a.map((function(e,t){return r.a.createElement(E.a,{key:t},r.a.createElement(E.a.Content,null,r.a.createElement(E.a.Header,null,e.data.title),r.a.createElement(E.a.Description,null,e.data.description),r.a.createElement(E.a.Extra,null,r.a.createElement(p.a,{onClick:function(){return l(t,e.data.id)}},"See Details ",e.id)),r.a.createElement(E.a.Extra,null,r.a.createElement(Y.a.Group,{itemsPerRow:5},"image_data"in e&&e.image_data.map((function(e,t){return r.a.createElement(Y.a,{key:e.key},r.a.createElement(Y.a.Content,null,r.a.createElement(m.a,{src:e.image_url})),r.a.createElement(p.a,{attached:"bottom"},"Delete"))}))))))})))))};var ve=function(){var e=window.location.hash.split("?")[1],t=f.a.parse(e);return r.a.createElement("div",{style:{textAlign:"center",marginTop:"50px"}},"using_sandbox"in t&&"true"==t.using_sandbox&&r.a.createElement("form",{action:"https://workersandbox.mturk.com/mturk/externalSubmit",method:"post"},r.a.createElement("input",{type:"hidden",id:"assignmentId",name:"assignmentId",value:t.assignmentId}),r.a.createElement("input",{type:"hidden",id:"hitId",name:"hitId",value:t.hitId}),r.a.createElement("input",{type:"hidden",id:"workerId",name:"workerId",value:t.workerId}),r.a.createElement(p.a,null,"Complete HIT")),"using_sandbox"in t&&"false"==t.using_sandbox&&r.a.createElement("form",{action:"https://www.mturk.com/mturk/externalSubmit",method:"post"},r.a.createElement("input",{type:"hidden",id:"assignmentId",name:"assignmentId",value:t.assignmentId}),r.a.createElement("input",{type:"hidden",id:"hitId",name:"hitId",value:t.hitId}),r.a.createElement("input",{type:"hidden",id:"workerId",name:"workerId",value:t.workerId}),r.a.createElement(p.a,null,"Complete HIT")),!("workerId"in t)&&!("assignmentId"in t)&&r.a.createElement(p.a,{basic:!0,color:"grey",as:i.b,to:"/"},"Back to Home"))},Ie=Object(u.a)(),ke=r.a.createElement(i.a,{history:Ie},r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"/",component:k}),r.a.createElement(o.b,{path:"/dashboard",component:X}),r.a.createElement(o.b,{path:"/projects",component:X}),r.a.createElement(o.b,{path:"/project/:pid",component:J}),r.a.createElement(o.b,{path:"/annotate/:pid",component:pe}),r.a.createElement(o.b,{path:"/addProject",component:ne}),r.a.createElement(o.b,{path:"/annotateObjectStory/:imgid",component:ge}),r.a.createElement(o.b,{path:"/objectStory/:imgid",component:je}),r.a.createElement(o.b,{path:"/admin",component:we}),r.a.createElement(o.b,{path:"/mturk",component:k}),r.a.createElement(o.b,{path:"/mturksuccess",component:ve})));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement("div",null,ke),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[242,1,2]]]);
//# sourceMappingURL=main.b0aeb0d3.chunk.js.map